<html>
<head>
	<title></title>
	<script language="Javascript" src="../../Framework/jsGFwk.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkRM.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkIO.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkCollisions.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkScenes.js"></script>
	<script language="Javascript" src="scripts/hud.js"></script>
	<style>
		@font-face {
			font-family: 'zxFont';
			src: url('fonts/zxBold.ttf');
		}
	</style>
</head>
<body style="background-color:#black; cursor:none">
	<canvas id="canvas" width="320" height="240"></canvas>
</body>
<script language="Javascript">
	var GLOBALS = { 
		CANVAS_SIZE : { width: 320, height: 240 },
		SPEED: 4.5,
		COINS: 0
	};
	
	jsGFwk.settings.canvas = "canvas";
	jsGFwk.settings.clearColor = "rgb(0,0,0)";
	
	jsGFwk.include("ResourceManager");
	jsGFwk.include("IO");
	jsGFwk.include("Collisions");
	jsGFwk.include("Scenes");
	
	jsGFwk.ResourceManager.addGraphic({ name: "main", source: "graphics/mainGraphics.png" });
	jsGFwk.Scenes.create({name: "scene1", gameObjects: [hud] });
	
	jsGFwk.createObject({
		id: "progress",
		visible: true,
		barWidth: 0,
		ran: 10,
		blinking: false,
		init: function() {
			jsGFwk.ResourceManager.onResourcesLoadedCompleted = function() {
				setTimeout(function () {
					jsGFwk.Scenes.scenes.scene1.enable();
					jsGFwk._gameObjects.progress.destroy();
				}, 1000);
			};
		},
		update: function(delta) {
			var a = (jsGFwk.ResourceManager._totalLoadedResources * 100) / jsGFwk.ResourceManager._totalResources;
			this.barWidth = (a * 270) / 100;
			this.blinking = !this.blinking;
			this.ran++;
			if (this.ran >= 200) { this.ran = 0; }
		},
		draw: function (context) {
			context.save();
				context.fillStyle = "#00FF00";
				context.fillRect(0,0, 320, 240);
				
				if (this.blinking) {
					for (var i = 0; i <= 10; i++) {
						for (var j = 0; j <= 3; j++) {
							context.fillStyle = "#FF00FF";
							context.fillRect(j * 110, ((i * 50) + (j * 10) + this.ran) - 200, 110, 20);
						}
					}
				}
			
				context.fillStyle = "#FFFF00";
				context.fillRect(20, 20, 280, 200);
				
				context.fillStyle = "#000000";
				context.fillText("Loading...", 130, 100);
				
				context.strokeStyle = "#FFFFFF";
				context.strokeRect(25, 120, 270, 30);
				context.fillRect(25, 120, this.barWidth, 30);
			context.restore();
		}
	});

	jsGFwk.start();
</script>
</html>