<html>
	<head>
		<title>TecNoVirus</title>
	</head>
	<script language="Javascript" src="../../Framework/jsGFwk.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwk2dFastAnimation.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkContainer.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkIO.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkCollisions.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkRM.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkSprites.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkFonts.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkScenes.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkPath.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkTimers.js"></script>
	<script language="Javascript" src="../../Framework/jsGFwkJukebox.js"></script>
	
    <script language="Javascript" src="scripts/hud.js"></script>
    <script language="Javascript" src="scripts/bullet.js"></script>
    <script language="Javascript" src="scripts/points.js"></script>
    <script language="Javascript" src="scripts/player.js"></script>
    <script language="Javascript" src="scripts/enemyController.js"></script>
    <script language="Javascript" src="scripts/wallsController.js"></script>
    <script language="Javascript" src="scripts/walls.js"></script>
    <script language="Javascript" src="scripts/enemy.js"></script>
    <script language="Javascript" src="scripts/page.js"></script>
    <script language="Javascript" src="scripts/particle.js"></script>
    
	<body style="border:0px; margin:0px; padding:0px; background-color: white;">
		<canvas width="640" height="480" id="canvas"></canvas>
	</body>
</html>
<script>
    var point = 0;
    var screensCount = 0;
	
	jsGFwk.settings.canvas = "canvas";
	jsGFwk.settings.clearColor = "rgb(10, 10, 10)";
	jsGFwk.settings.frameRate = 1000 / 60;
	
	jsGFwk.include("FastAnimation");
	jsGFwk.include("Container");
	jsGFwk.include("IO");
	jsGFwk.include("Collisions");
	jsGFwk.include("ResourceManager");
	jsGFwk.include("Sprites");
	jsGFwk.include("Fonts");
	jsGFwk.include("Scenes");
	jsGFwk.include("Path");
	
	jsGFwk.Fonts.createFont({ name: 'pixelated', source: 'fonts/zxBold.ttf' });

    var doorSound = {};
		doorSound[jsGFwk.ResourceManager.sounds.format.mp3] = { source: "fx/doors.mp3" };
        doorSound[jsGFwk.ResourceManager.sounds.format.ogg] = { source: "fx/doors.ogg" };
	jsGFwk.ResourceManager.addSound({ name: "doors", sources: doorSound});
    
    var explodeSound = {};
		explodeSound[jsGFwk.ResourceManager.sounds.format.mp3] = { source: "fx/explosion.mp3" };
        explodeSound[jsGFwk.ResourceManager.sounds.format.ogg] = { source: "fx/explosion.ogg" };
	jsGFwk.ResourceManager.addSound({ name: "explode", sources: explodeSound});
    
    var laserSound = {};
		laserSound[jsGFwk.ResourceManager.sounds.format.mp3] = { source: "fx/laser.mp3" };
        laserSound[jsGFwk.ResourceManager.sounds.format.ogg] = { source: "fx/laser.ogg" };
	jsGFwk.ResourceManager.addSound({ name: "laser", sources: laserSound});
        
    var hud = new Hud();
    
    var alanWake = new player();
    var bulletContainer = jsGFwk.Container.createContainer("bulletCloner", new Bullet(), true);
    alanWake.bulletContainer = bulletContainer;
    
    var enemyCloner = jsGFwk.Container.createContainer("enemyCloner", new Enemy(), true);
    var enemyControl = new enemyController();
    enemyControl.enemies = enemyCloner;
    alanWake.badCloner = enemyCloner;
    
    var wallsCloner = jsGFwk.Container.createContainer("wallCloner", new Walls(), true);
    var wallsControl = new wallsController();
    wallsControl.walls = wallsCloner;
    alanWake.wallsCloner = wallsCloner;
    
    var myPoints = new points();
    var page = new Page();

    jsGFwk.Scenes.create({name: "hud", 
        gameObjects: [hud] });
    
    jsGFwk.Scenes.create({name: "game", 
        gameObjects: [bulletContainer, enemyCloner, wallsCloner,
                      alanWake, enemyControl, wallsControl, myPoints, page] });
    
    var laserJuke = {},
        explodeJuke = {};
    
    jsGFwk.ResourceManager.onResourcesLoadedCompleted = function() {
        laserJuke = new jsGFwk.Jukebox({volume: 0.3, channels: 5, source: jsGFwk.ResourceManager.sounds.laser });
        explodeJuke = new jsGFwk.Jukebox({volume: 0.3, channels: 5, source: jsGFwk.ResourceManager.sounds.explode });
        jsGFwk.Scenes.scenes.hud.enable();
    };
    
    jsGFwk.start();
    
</script>